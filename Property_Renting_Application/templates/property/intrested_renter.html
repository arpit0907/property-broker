{% extends 'base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block content %}


 <div class="container">        
            <h2> Intrested Renter List</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Name</th>
                <th>City</th>
                <th>Address</th>
                <th>Size</th>
                <th>Prize</th>
                <th>Created by</th>
                <th>Interested Renter Name</th>
                <th>Contact Number </th>
                
              </tr>
            </thead>
            <tbody>
                {% for object in intrested_renter %}
            <tr>
                   <td>{{ object.properties.name }}</td>
                   <td>{{ object.properties.city }}</td>
                   <td>{{object.properties.address }}</td>
                   <td>{{ object.properties.size}}</td>
                   <td>{{ object.properties.prize}}</td>
                   <td>{{ object.properties.created_by}}</td>
                   <td>{{object.user.username}}</td>
                   <td>{{object.user.profile.phone}}</td>
                  
               
              
                   <td><button type="button" id="{{ object.properties.id }}" class="approve_renter" data-id="{{ object.properties.id }}" data-user_id="{{object.user.id}}" data-url="{% url 'property:property-approve-renter' %}" >Approve</button></td>
                  </tr>
                {%endfor%}
            </tbody>
          </table>
        </div>




        {% endblock %}



  {% block script %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready( function() { 

       $(".approve_renter").on('click',function(e){
        e.preventDefault();
        
        var url = $(this).data('url');
        var object_id = $(this).data('id');
        var user_id = $(this).data('user_id');

        
        $.ajax({
        type: "POST",
        url: url,
        headers:{
            "X-CSRFToken": '{{csrf_token}}' 
        },
        dataType: "json",
        data: {"object_id":object_id,"user_id":user_id},
        success: function(response) { 
                  if(response.status == true){
                   alert('already approved')
                 }else{
                   alert('Successfully approved')

                 } 
                   
                  

         },

        });
    });
});



</script>

{% endblock %}
